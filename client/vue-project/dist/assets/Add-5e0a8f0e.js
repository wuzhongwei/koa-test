import{s as y}from"./request-ed690f3a.js";import{d as C,a as k,r as g,b as u,o as G,ac as w,w as t,f as l,i as f,E as V}from"./index-a72879b9.js";const B=C({__name:"Add",setup(N){let m=!0,p=null;const d=k(),o=g({integral:0,name:"",phone:"",glasses:"",eyeglass:"",sunglasses:"",oldGlasses:"",degrees:""}),b=g({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}]}),_=r=>{r&&r.resetFields()},x=()=>{},v=r=>{r&&(clearTimeout(p),p=setTimeout(()=>{m=!0},200),m&&(m=!1,r.validate(e=>{if(e)y({url:"/api/create",method:"post",data:{action:"add",...o}}).then(a=>{a.code===0?(V.success("添加用户成功"),d.value.resetFields()):V.error("创建用户失败")});else return console.log("error submit!"),!1})))};return(r,e)=>{const a=u("el-input"),n=u("el-form-item"),F=u("el-input-number"),i=u("el-button"),U=u("el-form");return G(),w(U,{ref_key:"ruleFormRef",ref:d,model:o,"status-icon":"",rules:b,"label-width":"120px",class:"demo-ruleForm"},{default:t(()=>[l(n,{label:"姓名",prop:"name"},{default:t(()=>[l(a,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号",prop:"phone"},{default:t(()=>[l(a,{modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=s=>o.phone=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"眼镜架",prop:"glasses"},{default:t(()=>[l(a,{modelValue:o.glasses,"onUpdate:modelValue":e[2]||(e[2]=s=>o.glasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"眼镜片",prop:"eyeglass"},{default:t(()=>[l(a,{modelValue:o.eyeglass,"onUpdate:modelValue":e[3]||(e[3]=s=>o.eyeglass=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"太阳镜",prop:"sunglasses"},{default:t(()=>[l(a,{modelValue:o.sunglasses,"onUpdate:modelValue":e[4]||(e[4]=s=>o.sunglasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"老花镜",prop:"oldGlasses"},{default:t(()=>[l(a,{modelValue:o.oldGlasses,"onUpdate:modelValue":e[5]||(e[5]=s=>o.oldGlasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"度数",prop:"degrees"},{default:t(()=>[l(a,{modelValue:o.degrees,"onUpdate:modelValue":e[6]||(e[6]=s=>o.degrees=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"积分",prop:"integral"},{default:t(()=>[l(F,{modelValue:o.integral,"onUpdate:modelValue":e[7]||(e[7]=s=>o.integral=s),min:1,"controls-position":"right",onChange:x},null,8,["modelValue"])]),_:1}),l(n,null,{default:t(()=>[l(i,{type:"primary",onClick:e[8]||(e[8]=s=>v(d.value))},{default:t(()=>[f("确定")]),_:1}),l(i,{onClick:e[9]||(e[9]=s=>_(d.value))},{default:t(()=>[f("清空")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{B as default};
