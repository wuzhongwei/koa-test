import{s as C}from"./request-aa49ef4b.js";import{d as U,a as k,r as g,b as u,o as c,v as G,w as t,f as l,i as f,E as V}from"./index-bbd3d47d.js";const h=U({__name:"Add",setup(w){let d=!0,p=null;const m=k(),o=g({integral:0,name:"",phone:"",glasses:"",eyeglass:"",sunglasses:"",oldGlasses:""}),_=g({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}]}),b=r=>{r&&r.resetFields()},x=()=>{},v=r=>{r&&(clearTimeout(p),p=setTimeout(()=>{d=!0},200),d&&(d=!1,r.validate(e=>{if(e)C({url:"/api/create",method:"post",data:{action:"add",...o}}).then(a=>{a.code===0?(V.success("添加用户成功"),m.value.resetFields()):V.error("创建用户失败")});else return console.log("error submit!"),!1})))};return(r,e)=>{const a=u("el-input"),n=u("el-form-item"),F=u("el-input-number"),i=u("el-button"),y=u("el-form");return c(),G(y,{ref_key:"ruleFormRef",ref:m,model:o,"status-icon":"",rules:_,"label-width":"120px",class:"demo-ruleForm"},{default:t(()=>[l(n,{label:"姓名",prop:"name"},{default:t(()=>[l(a,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号",prop:"phone"},{default:t(()=>[l(a,{modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=s=>o.phone=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"眼镜架",prop:"glasses"},{default:t(()=>[l(a,{modelValue:o.glasses,"onUpdate:modelValue":e[2]||(e[2]=s=>o.glasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"眼镜片",prop:"eyeglass"},{default:t(()=>[l(a,{modelValue:o.eyeglass,"onUpdate:modelValue":e[3]||(e[3]=s=>o.eyeglass=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"太阳镜",prop:"sunglasses"},{default:t(()=>[l(a,{modelValue:o.sunglasses,"onUpdate:modelValue":e[4]||(e[4]=s=>o.sunglasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"老花镜",prop:"oldGlasses"},{default:t(()=>[l(a,{modelValue:o.oldGlasses,"onUpdate:modelValue":e[5]||(e[5]=s=>o.oldGlasses=s),maxlength:"100"},null,8,["modelValue"])]),_:1}),l(n,{label:"积分",prop:"integral"},{default:t(()=>[l(F,{modelValue:o.integral,"onUpdate:modelValue":e[6]||(e[6]=s=>o.integral=s),min:1,"controls-position":"right",onChange:x},null,8,["modelValue"])]),_:1}),l(n,null,{default:t(()=>[l(i,{type:"primary",onClick:e[7]||(e[7]=s=>v(m.value))},{default:t(()=>[f("确定")]),_:1}),l(i,{onClick:e[8]||(e[8]=s=>b(m.value))},{default:t(()=>[f("清空")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{h as default};
