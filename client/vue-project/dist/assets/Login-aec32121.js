import{d as w,u as b,r as h,a as V,o as E,c as I,b as d,e as o,w as r,f as m,g as x,h as S,i as q,j as B,E as C,s as F,k as L,l as N,m as U,p as j,n as K,_ as O}from"./index-43bae569.js";import{E as R,a as T}from"./el-input-e4b17d31.js";import{E as $,s as M}from"./request-dedb50ba.js";const Q=l=>(j("data-v-4f1cb784"),l=l(),K(),l),z={class:"login-wrapper"},A={class:"ms-login"},D=Q(()=>d("div",{class:"ms-title"},"后台管理系统",-1)),G={class:"btn-wrapper"},H=w({__name:"Login",setup(l){const f=b(),g=q(),p=B(),s=h({account:"admin",password:"admin123"}),v={account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=V(),y=n=>Object.keys(n).reduce((e,t)=>(t!=="redirect"&&(e[t]=n[t]),e),{}),i=n=>{n&&n.validate(e=>{if(e)M({url:"/api/token",method:"post",data:{...s,type:"101"}}).then(({data:t})=>{C.success("登录成功"),F(t.token),f.token=t.token;const u=p.query.redirect||"";g.push({path:u,query:y(p.query)})});else return!1})};return(n,e)=>{const t=L,u=$,_=R,k=T;return E(),I("div",z,[d("div",A,[D,o(k,{rules:v,ref_key:"login",ref:c,model:s,class:"ms-content"},{default:r(()=>[o(_,{prop:"account"},{default:r(()=>[o(u,{modelValue:s.account,"onUpdate:modelValue":e[0]||(e[0]=a=>s.account=a),placeholder:"请输入用户名"},{prepend:r(()=>[o(t,{icon:m(N)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"password"},{default:r(()=>[o(u,{onKeyup:e[1]||(e[1]=x(a=>i(c.value),["enter"])),type:"password",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.password=a),placeholder:"请输入密码"},{prepend:r(()=>[o(t,{icon:m(U)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),d("div",G,[o(t,{type:"primary",onClick:e[3]||(e[3]=a=>i(c.value))},{default:r(()=>[S("登录")]),_:1})])]),_:1},8,["model"])])])}}});const X=O(H,[["__scopeId","data-v-4f1cb784"]]);export{X as default};
